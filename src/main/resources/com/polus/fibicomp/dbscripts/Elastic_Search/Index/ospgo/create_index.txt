--- Steps to create new index ---

1. Delete the old index(if already have with same name).

	curl -XDELETE https://localhost:9200/award/

2. Create new award index by executing below command.
irbfibi
iacucfibi
coifibi

curl -XDELETE http://localhost:9200/irb/
curl -XDELETE http://localhost:9200/iacuc/
curl -XDELETE http://localhost:9200/coi/
curl -XDELETE http://localhost:9200/proposal/
curl -XDELETE http://localhost:9200/award/

curl -XPUT 'http://localhost:9200/coi/' -d '{"settings": {"number_of_shards": 5,"analysis": {"filter": {"ngram_filter": {"type": "edgeNGram","min_gram": 2,"max_gram": 20}},"analyzer": {"ngram_analyzer": {"type": "custom","tokenizer": "whitespace","filter": ["lowercase", "ngram_filter"]}}}},"mappings": {"coi": {"_all": {"type": "string","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"properties": { "coi_disclosure_id": {"type": "string","include_in_all": false},"document_number": {"type": "string","include_in_all": false},"coi_disclosure_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"module_item_key": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"person_id": {"type": "string","include_in_all": false},"full_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"disclosure_disposition": {"type": "string","include_in_all": false},"disclosure_status": {"type": "string","include_in_all": false,"index": "not_analyzed"},"@version": {"type": "integer","include_in_all": false},"@timestamp": {"type": "date","include_in_all": false}}}}}';


curl -XPUT 'http://localhost:9200/devproposal/' -d '{"settings": {"number_of_shards": 5,"analysis": {"filter": {"ngram_filter": {"type": "edgeNGram","min_gram": 2,"max_gram": 20}},"analyzer": {"ngram_analyzer": {"type": "custom","tokenizer": "whitespace","filter": ["lowercase", "ngram_filter"]}}}},"mappings": {"irb": {"_all": {"type": "string","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"properties": { "document_number": {"type": "string","include_in_all": false},"proposal_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"protocol_type": {"type": "string","include_in_all": false},"lead_unit_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"lead_unit_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"person_id": {"type": "string","include_in_all": false},"person_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"sponsor": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"title": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status_code": {"type": "string","include_in_all": false,"index": "not_analyzed"},"@version": {"type": "integer","include_in_all": false},"@timestamp": {"type": "date","include_in_all": false}}}}}'


curl -XPUT 'http://localhost:9200/iacuc/' -d '{"settings": {"number_of_shards": 5,"analysis": {"filter": {"ngram_filter": {"type": "edgeNGram","min_gram": 2,"max_gram": 20}},"analyzer": {"ngram_analyzer": {"type": "custom","tokenizer": "whitespace","filter": ["lowercase", "ngram_filter"]}}}},"mappings": {"iacuc": {"_all": {"type": "string","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"properties": { "protocol_id": {"type": "string","include_in_all": false},"document_number": {"type": "string","include_in_all": false},"protocol_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"protocol_type": {"type": "string","include_in_all": false},"lead_unit_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"lead_unit_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"person_id": {"type": "string","include_in_all": false},"person_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"title": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status_code": {"type": "string","include_in_all": false,"index": "not_analyzed"},"@version": {"type": "integer","include_in_all": false},"@timestamp": {"type": "date","include_in_all": false}}}}}';

curl -XPUT 'http://localhost:9200/irb/' -d '{"settings": {"number_of_shards": 5,"analysis": {"filter": {"ngram_filter": {"type": "edgeNGram","min_gram": 2,"max_gram": 20}},"analyzer": {"ngram_analyzer": {"type": "custom","tokenizer": "whitespace","filter": ["lowercase", "ngram_filter"]}}}},"mappings": {"irb": {"_all": {"type": "string","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"properties": { "protocol_id": {"type": "string","include_in_all": false},"document_number": {"type": "string","include_in_all": false},"protocol_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"protocol_type": {"type": "string","include_in_all": false},"lead_unit_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"lead_unit_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"person_id": {"type": "string","include_in_all": false},"person_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"title": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status_code": {"type": "string","include_in_all": false,"index": "not_analyzed"},"@version": {"type": "integer","include_in_all": false},"@timestamp": {"type": "date","include_in_all": false}}}}}'


curl -XPUT 'http://localhost:9200/award/' -d '{"settings": {"number_of_shards": 5,"analysis": {"filter": {"ngram_filter": {"type": "edgeNGram","min_gram": 2,"max_gram": 20}},"analyzer": {"ngram_analyzer": {"type": "custom","tokenizer": "whitespace","filter": ["lowercase", "ngram_filter"]}}}},"mappings": {"award": {"_all": {"type": "string","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"properties": { "document_number": {"type": "string","include_in_all": false},"award_id": {"type": "string","include_in_all": false},"award_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"person_id": {"type": "string","include_in_all": false},"pi_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"sponsor": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"account_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"lead_unit_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"lead_unit_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"title": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status_code": {"type": "integer","include_in_all": false,"index": "not_analyzed"},"@version": {"type": "integer","include_in_all": false},"@timestamp": {"type": "date","include_in_all": false}}}}}'

 
curl -XPUT 'http://localhost:9200/subaward/' -d '{"settings": {"number_of_shards": 5,"analysis": {"filter": {"ngram_filter": {"type": "edgeNGram","min_gram": 2,"max_gram": 20}},"analyzer": {"ngram_analyzer": {"type": "custom","tokenizer": "whitespace","filter": ["lowercase", "ngram_filter"]}}}},"mappings": {"irb": {"_all": {"type": "string","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"properties": {"subaward_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"account_number": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "whitespace"},"document_number": {"type": "string","include_in_all": false},"subaward_po": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"subrecipient": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"sub_prime": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"Sponsor_Award_Id": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"status_code": {"type": "string","include_in_all": false,"index": "not_analyzed"},"status": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"person_id": {"type": "string","include_in_all": false},"pi_name": {"type": "string","include_in_all": true,"term_vector": "yes","analyzer": "ngram_analyzer","search_analyzer": "standard"},"@version": {"type": "integer","include_in_all": false},"@timestamp": {"type": "date","include_in_all": false}}}}}'
 

3. Please fill jdbc_user and jdbc_password  property in award.conf


4. Load data using logstash by executing the below command.

    /opt/logstash/bin/logstash -f /etc/logstash/conf.d/subaward.conf